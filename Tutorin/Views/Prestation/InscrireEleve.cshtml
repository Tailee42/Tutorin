@model Tutorin.ViewModels.PrestationViewModel
@using Tutorin.Models
@{
    ViewBag.Title = "Inscrire élève à prestation";
    Layout = "_LayoutDuSite";
}

@{
    var responsableId = User.FindFirst("RoleId").Value;
}

@section css {
    <link href="/css/cards.css" rel="stylesheet" />
}

@section Menu {

    <a href="/Home/">Accueil</a>
    <a href="/Prestation/VoirPrestationsValidees?responsableId=@responsableId">Prestations</a>
    <a href="/ResponsableEleve/modifier?responsableId=@responsableId">Mon Compte</a>
    <a href="/login/Deconnexion">Déconnexion</a>
}

<div class="nomUtilisateur">
    <h2>@Model.ResponsableEleve.Utilisateur.Nom @Model.ResponsableEleve.Utilisateur.Prenom</h2>
</div>

<h1>Choisir l'éleve à inscrire :</h1>
<div class="cards">


    @using (Html.BeginForm("AjoutEleveAPrestation", "Prestation", FormMethod.Post))
    {
        <input name="prestationId" type="hidden" value="@Model.Prestation.Id" />
    @foreach (Tutorin.Models.Abonnement abonnement in Model.ResponsableEleve.Abonnements)
    {
        @if (abonnement.EleveId != null && abonnement.DateFin == DateTime.MinValue)
        {
          <input name="eleveIds" type="checkbox" value="@abonnement.Eleve.Id" /> @abonnement.Eleve.Utilisateur.Prenom @abonnement.Eleve.Utilisateur.Nom
        }
    }
      <input type="submit" value="Inscrire" />
    }

</div>


@section Script {
    <script type="text/javascript" src="~/Scripts/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.validate-vsdoc.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.validate.unobtrusive.js"></script>
}